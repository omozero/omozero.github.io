function checkOpen(){}function coverColor(){var e=document.getElementById("post-cover")?.src;void 0!==e?RGBaster.colors(e,{paletteSize:30,exclude:["rgb(255,255,255)","rgb(0,0,0)","rgb(254,254,254)"],success:function(e){if("rgb(66,90,239)"!=e.dominant){const o=e.dominant.match(/\d+/g);var t=`rgb(${o[0]},${o[1]},${o[2]})`;"light"==getContrastYIQ(colorHex(t))&&(t=LightenDarkenColor(colorHex(t),-40)),document.styleSheets[0].addRule(":root","--Tlp-main:"+t+"!important"),document.styleSheets[0].addRule(":root","--Tlp-main-op:"+t+"23!important"),document.styleSheets[0].addRule(":root","--Tlp-main-op-deep:"+t+"dd!important"),document.styleSheets[0].addRule(":root","--Tlp-main-none:"+t+"00!important"),Tlp.initThemeColor(),document.getElementById("coverdiv").classList.add("loaded")}}}):(document.styleSheets[0].addRule(":root","--Tlp-main: var(--Tlp-theme)!important"),document.styleSheets[0].addRule(":root","--Tlp-main-op: var(--Tlp-theme-op)!important"),document.styleSheets[0].addRule(":root","--Tlp-main-op-deep:var(--Tlp-theme-op-deep)!important"),document.styleSheets[0].addRule(":root","--Tlp-main-none: var(--Tlp-theme-none)!important"),Tlp.initThemeColor())}function colorHex(e){var t=e;if(/^(rgb|RGB)/.test(t)){for(var o=t.replace(/(?:\(|\)|rgb|RGB)*/g,"").split(","),n="#",r=0;r<o.length;r++){var l=Number(o[r]).toString(16);"0"===l&&(l+=l),n+=l}return 7!==n.length&&(n=t),n}if(!/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(t))return t;var i=t.replace(/#/,"").split("");if(6===i.length)return t;if(3===i.length){var a="#";for(r=0;r<i.length;r+=1)a+=i[r]+i[r];return a}}function colorRgb(e){var t=e.toLowerCase();if(t&&/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(t)){if(4===t.length){for(var o="#",n=1;n<4;n+=1)o+=t.slice(n,n+1).concat(t.slice(n,n+1));t=o}var r=[];for(n=1;n<7;n+=2)r.push(parseInt("0x"+t.slice(n,n+2)));return"rgb("+r.join(",")+")"}return t}function LightenDarkenColor(e,t){var o=!1;"#"==e[0]&&(e=e.slice(1),o=!0);var n=parseInt(e,16),r=(n>>16)+t;r>255?r=255:r<0&&(r=0);var l=(n>>8&255)+t;l>255?l=255:l<0&&(l=0);var i=(255&n)+t;return i>255?i=255:i<0&&(i=0),(o?"#":"")+String("000000"+(i|l<<8|r<<16).toString(16)).slice(-6)}function getContrastYIQ(e){var t,o=colorRgb(e).match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);return t=299*o[1]+587*o[2]+114*o[3],(t/=255e3)>=.5?"light":"dark"}function navTitle(){""===GLOBAL_CONFIG_SITE.title.replace("Tlphrn","")?document.getElementById("page-name-text").style.display="none":document.querySelector("#page-name-text").innerHTML=document.title.split(" | Tlphrn")[0]}function showcopy(){if(void 0!==GLOBAL_CONFIG.Snackbar)btf.snackbarShow(GLOBAL_CONFIG.copy.success);else{const e=ctx.previousElementSibling;e.innerText=GLOBAL_CONFIG.copy.success,e.style.opacity=1,setTimeout((()=>{e.style.opacity=0}),700)}}checkOpen.toString=function(){this.opened=!0},window.onload=function(){for(var e=document.getElementsByClassName("copybtn"),t=0;t<e.length;t++)document.getElementsByClassName("copybtn")[t].addEventListener("click",(function(){showcopy()}));Tlp.initThemeColor()};var getTimeState=()=>{var e=(new Date).getHours(),t="";return e>=0&&e<=5?t="晚安":e>5&&e<=10?t="早上好":e>10&&e<=14?t="中午好":e>14&&e<=18?t="下午好":e>18&&e<=24&&(t="晚上好"),t};function fly_to_top(){document.getElementById("guli_top").classList.add("open_wing"),setTimeout((function(){document.getElementById("guli_top").classList.add("flying"),btf.scrollToDest(0,300)}),300),setTimeout((function(){document.getElementById("guli_top").classList.remove("flying"),document.getElementById("guli_top").classList.remove("open_wing"),document.getElementById("guli_top").style.cssText="opacity: ''; transform: ''"}),600)}var navFn={switchDarkMode:()=>{"light"==("dark"===document.documentElement.getAttribute("data-theme")?"dark":"light")?(activateDarkMode(),saveToLocal.set("theme","dark",2),void 0!==GLOBAL_CONFIG.Snackbar&&btf.snackbarShow(GLOBAL_CONFIG.Snackbar.day_to_night,!1,2e3)):(activateLightMode(),saveToLocal.set("theme","light",2),void 0!==GLOBAL_CONFIG.Snackbar&&btf.snackbarShow(GLOBAL_CONFIG.Snackbar.night_to_day,!1,2e3)),"function"==typeof utterancesTheme&&utterancesTheme(),"object"==typeof FB&&window.loadFBComment(),window.DISQUS&&document.getElementById("disqus_thread").children.length&&setTimeout((()=>window.disqusReset()),200);let e="light"===document.documentElement.getAttribute("data-theme")?"#363636":"#F7F7FA";if(document.getElementById("posts-chart")){let t=postsOption;t.textStyle.color=e,t.title.textStyle.color=e,t.xAxis.axisLine.lineStyle.color=e,t.yAxis.axisLine.lineStyle.color=e,postsChart.setOption(t)}if(document.getElementById("tags-chart")){let t=tagsOption;t.textStyle.color=e,t.title.textStyle.color=e,t.xAxis.axisLine.lineStyle.color=e,t.yAxis.axisLine.lineStyle.color=e,tagsChart.setOption(t)}if(document.getElementById("categories-chart")){let t=categoriesOption;t.textStyle.color=e,t.title.textStyle.color=e,t.legend.textStyle.color=e,categoriesChart.setOption(t)}}};function RemoveRewardMask(){$(".reward-main").attr("style","display: none"),$("#quit-box").attr("style","display: none")}function AddRewardMask(){$(".reward-main").attr("style","display: flex")}function travelling(){fetch("https://moments.jayhrn.com/randomfriend").then((e=>e.json())).then((e=>{var t=e.name,o=e.link,n="点击前往按钮进入随机一个友链，不保证跳转网站的安全性和可用性。本次随机到的是本站友链：「"+t+"」";document.styleSheets[0].addRule(":root","--Tlp-snackbar-time:8000ms!important"),Snackbar.show({text:n,duration:8e3,pos:"top-center",actionText:"前往",onActionClick:function(e){$(e).css("opacity",0),window.open(o,"_blank")}})}))}function toforeverblog(){Snackbar.show({text:"点击前往按钮进入「十年之约」项目中的成员博客，不保证跳转网站的安全性和可用性",duration:8e3,pos:"top-center",actionText:"前往",onActionClick:function(e){$(e).css("opacity",0),window.open(link,"https://www.foreverblog.cn/go.html")}})}function totraveling(){btf.snackbarShow("即将跳转到「开往」项目的成员博客，不保证跳转网站的安全性和可用性",!1,5e3),setTimeout((function(){window.open("https://travellings.link/")}),"5000")}function removeLoading(){setTimeout((function(){preloader.endLoading()}),3e3)}function addFriendLink(){var e=document.getElementsByClassName("el-textarea__inner")[0];let t=document.createEvent("HTMLEvents");t.initEvent("input",!0,!0),e.value="昵称（请勿包含博客等字样）：\n网站地址（要求博客地址，请勿提交个人主页）：\n头像图片url（请提供尽可能清晰的图片，并且支持直接访问）：\n描述：\n",e.dispatchEvent(t),Tlp.scrollTo("#post-comment"),e.focus(),e.setSelectionRange(-1,-1)}function getArrayItems(e,t){var o=new Array;for(var n in e)o.push(e[n]);for(var r=new Array,l=0;l<t&&o.length>0;l++){var i=Math.floor(Math.random()*o.length);r[l]=o[i],o.splice(i,1)}return r}function owoBig(){document.getElementById("post-comment").addEventListener("DOMNodeInserted",(e=>{if(e.target.classList&&"OwO-body"==e.target.classList.value){let t=e.target;if(t){let e="",o=!0,n=document.createElement("div");n.id="owo-big",document.querySelector("body").appendChild(n),t.addEventListener("contextmenu",(e=>e.preventDefault())),t.addEventListener("mouseover",(t=>{"LI"==t.target.tagName&&o&&(o=!1,e=setTimeout((()=>{let e=3*t.path[0].clientHeight,o=3*t.path[0].clientWidth,r=t.x-t.offsetX-(o-t.path[0].clientWidth)/2,l=t.y-t.offsetY;n.style.height=e+"px",n.style.width=o+"px",n.style.left=r+"px",n.style.top=l+"px",n.style.display="flex",n.innerHTML=`<img src="${t.target.querySelector("img").src}">`}),300))})),t.addEventListener("mouseout",(t=>{n.style.display="none",o=!0,clearTimeout(e)}))}}}))}function percent(){let e=document.documentElement.scrollTop||window.pageYOffset,t=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)-document.documentElement.clientHeight,o=Math.round(e/t*100),n=document.querySelector("#percent");var r=window.scrollY+document.documentElement.clientHeight,l=document.getElementById("post-tools")||document.getElementById("footer");l.offsetTop+l.offsetHeight/2<r||o>90?(document.querySelector("#nav-totop").classList.add("long"),n.innerHTML="返回顶部"):(document.querySelector("#nav-totop").classList.remove("long"),n.innerHTML=o),window.onscroll=percent}document.addEventListener("touchstart",(e=>{RemoveRewardMask()}),!1),$(document).unbind("keydown").bind("keydown",(function(e){if((e.ctrlKey||e.metaKey)&&67==e.keyCode&&""!=selectTextNow)return btf.snackbarShow("复制成功，复制和转载请标注本文地址"),rm.rightmenuCopyText(selectTextNow),!1})),document.addEventListener("scroll",btf.throttle((function(){Tlp.initThemeColor()}),200)),navigator.serviceWorker.getRegistrations().then((function(e){for(let t of e)t.unregister()})),window.onkeydown=function(e){123===e.keyCode&&btf.snackbarShow("开发者模式已打开，请遵循GPL协议",!1,3e3)},document.querySelector("#algolia-search").addEventListener("wheel",(e=>{e.preventDefault()})),document.querySelector("#console").addEventListener("wheel",(e=>{e.preventDefault()})),document.querySelector("#loading-box").addEventListener("wheel",(e=>{e.preventDefault()})),window.addEventListener("resize",(function(){document.querySelector("#waterfall")&&Tlp.refreshEssayWaterFall()})),document.getElementById("post-comment")&&owoBig(),document.addEventListener("scroll",btf.throttle((function(){var e=window.scrollY+document.documentElement.clientHeight,t=(window.scrollY,document.getElementById("pagination")),o=document.getElementById("post-tools");if(o&&t){var n=o.offsetTop+o.offsetHeight/2;document.body.clientWidth>1300&&(n<e?t.classList.add("show-window"):t.classList.remove("show-window"))}}),200)),"false"!==localStorage.getItem("keyboardToggle")?document.querySelector("#consoleKeyboard").classList.add("on"):document.querySelector("#consoleKeyboard").classList.remove("on"),$(window).on("keydown",(function(e){if(27==e.keyCode&&(Tlp.hideLoading(),Tlp.hideConsole(),rm.hideRightMenu()),Tlp_keyboard&&e.shiftKey&&!Tlp_intype){if(16==e.keyCode&&document.querySelector("#keyboard-tips").classList.add("show"),75==e.keyCode)return Tlp.keyboardToggle(),!1;if(65==e.keyCode)return Tlp.showConsole(),!1;if(77==e.keyCode)return Tlp.musicToggle(),!1;if(82==e.keyCode)return toRandomPost(),!1;if(72==e.keyCode)return pjax.loadUrl("/"),!1;if(68==e.keyCode)return rm.switchDarkMode(),!1;if(70==e.keyCode)return pjax.loadUrl("/moments/"),!1;if(76==e.keyCode)return pjax.loadUrl("/link/"),!1;if(80==e.keyCode)return pjax.loadUrl("/about/"),!1;if(84==e.keyCode)return pjax.loadUrl("/stars/"),!1}})),$(window).on("keyup",(function(e){16==e.keyCode&&document.querySelector("#keyboard-tips").classList.remove("show")})),$("input").focus((function(){Tlp_intype=!0})),$("textarea").focus((function(){Tlp_intype=!0})),$("input").focusout((function(){Tlp_intype=!1})),$("textarea").focusout((function(){Tlp_intype=!1})),document.addEventListener("pjax:send",(function(){console.clear(),Pace.restart(),Tlp.showLoading()})),document.addEventListener("pjax:complete",(function(){coverColor(),addRightMenuClickEvent(),navTitle(),percent(),Tlp.topPostScroll(),Tlp.topCategoriesBarScroll(),Tlp.sayhi(),Tlp.addTag(),Tlp.stopImgRightDrag(),Tlp.addFriendLinksInFooter(),Tlp.qrcodeCreate(),Tlp.hidecookie(),Tlp.onlyHome(),Tlp.addNavBackgroundInit(),Tlp.initIndexEssay(),Tlp.changeTimeInEssay(),Tlp.refreshEssayWaterFall(),Tlp.darkModeStatus(),Tlp.categoriesBarActive(),Tlp.initThemeColor(),Tlp.hideLoading(),Tlp.tagPageActive()}));